"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","star"],function(t,e,i,r,a,o){function l(){t(".loading-mask").addClass("hide"),t(".main-wrap").removeClass("invisibility"),t("footer").removeClass("invisibility")}console.log("comment_detail.js"),a.initLoginStatus();var s=a.util.getQueryString("cmId");!function(e){a.dao.getCommentDetail({cmId:e},function(e){if(e&&e.length>0){for(var i=0;i<e.length;i++){var r=e[i];r.productImg=a.util.picUrl+r.productImg;for(var o=0;o<r.shareimgs.length;o++)r.shareimgs[o]=a.util.commentPicUrl+r.shareimgs[o];if(r.crtime=a.util.formatOrderDateTime(r.crtime),sessionStorage.userInfo){var l=JSON.parse(sessionStorage.userInfo);r.userSubmiter=l.email}else r.userSubmiter=""}var s=a.util.getAdvSource().u;s||(s=a.util.getQueryString("u"));var n="";s&&(n="?u="+s);var m=a.util.encodeMenuType(a.util.getUvid()),d=[{commentList:e,attrDes:e[0].attrDes,colorDes:e[0].colorDes,productImg:e[0].productImg,productName:e[0].productName,href:a.util.formatProductName(e[0].productName)+"-d-"+a.util.encodeMenuType(e[0].productId)+"-"+a.util.encodeMenuType(e[0].productColorId)+"-"+m+".html"+n}];t("#comment_list").html(t("#commentTempl").tmpl(d)),t("#comment_list #color_title").html(t.i18n.map.ColorTitle),t("#comment_list .reply-text").html(t.i18n.map.DetailCommentReply),t("#comment_list .comment-info-wrap input").each(function(){t(this).rating({step:1,size:"xs",showClear:!1,min:0,max:5,disabled:!0,showCaption:!1}).rating("showStars",t(this).data().data)}),t("#comment_list .image-wrap img").each(function(){t(this).click(function(){t(this).parent().find("img").removeClass("selected"),t(this).addClass("selected");var e=t(this).data().data,i=t(this).parent().parent().find(".big-image-wrap");if(0==i.find(".owl-item").length){for(var r=i.data().data,o=r.split(","),l=[],s=0;s<o.length;s++){var n=o[s];l.push(n)}t("#commentBigImageTempl").tmpl(l).appendTo(i[0]),i.owlCarousel({nav:!0,loop:!1,slideBy:"1",autoPlay:!1,rewind:!1,smartSpeed:70,items:1,dots:!1,startPosition:e,navText:a.util.isMobile()?['<svg viewBox="0 0 24 24" style="width:80px;height:80px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" style="fill: #f1f1f1;"></path></svg>','<svg viewBox="0 0 24 24" style="width:80px;height:80px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" style="fill: #f1f1f1;"></path></svg>']:['<svg viewBox="0 0 24 24" style="width:40px;height:40px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" style="fill: #f1f1f1;"></path></svg>','<svg viewBox="0 0 24 24" style="width:40px;height:40px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" style="fill: #f1f1f1;"></path></svg>']}),i.removeClass("hide"),i.find(".owl-item img").click(function(){i.addClass("hide")})}else i.trigger("to.owl.carousel",[e]),i.removeClass("hide")})})}},null,function(){l()})}(s)});