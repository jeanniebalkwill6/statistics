"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(e,t,i,n,a){function r(){a.dao.getGroupInfo({productType:f},function(t){if(t&&t.length>0){var i=a.util.getAdvSource().u;i||(i=a.util.getQueryString("u"));var n="";i&&(n="?u="+i);for(var r=a.util.encodeMenuType(a.util.getUvid()),l=0;l<t.length;l++)for(var s=t[l],o=s.childMenus,u=0;u<o.length;u++){var d=o[u];d.imgPath&&(d.imgPath=a.util.picUrl+d.imgPath),d.adsImgPath&&(d.adsImgPath=a.util.picUrl+d.adsImgPath),d.href=a.util.formatProductName(d.typeDes)+"-l-"+a.util.encodeMenuType(d.productTypeId)+"-"+r+".html?parentId="+a.util.encodeMenuType(f)+n,o.length<=4?d.style="width: calc("+100/o.length+"% - 5px);":5==o.length?u<2?(d.style="width: calc(50% - 5px);",d.row="row1"):u>=2&&u<=4&&(d.style="width: calc(33.3333% - 5px);",d.row="row2"):6==o.length?(d.style="width: calc(33.3333% - 5px);",u<3?d.row="row1":u>=3&&u<6&&(d.row="row2")):7==o.length?u<3?(d.style="width: calc(33.3333% - 5px);",d.row="row1"):u>=3&&u<=6&&(d.style="width: calc(25% - 5px);",d.row="row2"):(d.style="width: calc(25% - 5px);",d.row=u<4?"row1":u>=3&&u<8?"row2":"row3")}e("#group_list").html(e("#groupItemTempl").tmpl(t));for(var c=e("#group_list .group-sub-classify-list-wrap"),l=0;l<c.length;l++){if(0==e(c[l]).find(".row1").length){var h=e(c[l]).find(".group-sub-classify-desc");if(h.length>0){for(var p=0,u=0;u<h.length;u++)h[u].offsetHeight>p&&(p=h[u].offsetHeight);h.css("height",p)}}if(e(c[l]).find(".row1").length>0){var h=e(c[l]).find(".row1 .group-sub-classify-desc");if(h.length>0){for(var p=0,u=0;u<h.length;u++)h[u].offsetHeight>p&&(p=h[u].offsetHeight);h.css("height",p)}}if(e(c[l]).find(".row2").length>0){var h=e(c[l]).find(".row2 .group-sub-classify-desc");if(h.length>0){for(var p=0,u=0;u<h.length;u++)h[u].offsetHeight>p&&(p=h[u].offsetHeight);h.css("height",p)}}if(e(c[l]).find(".row3").length>0){var h=e(c[l]).find(".row3 .group-sub-classify-desc");if(h.length>0){for(var p=0,u=0;u<h.length;u++)h[u].offsetHeight>p&&(p=h[u].offsetHeight);h.css("height",p)}}}}},null,function(){s()})}function l(){if(a.util.menu&&a.util.menu.length>0){var t=a.util.getAdvSource().u;t||(t=a.util.getQueryString("u"));var i="";t&&(i="?u="+t);for(var n=a.util.menu.reverse(),r="<li><a id='breadcrumb_home' href='/'>"+e.i18n.map.Home+"</a></li>",l=0;l<n.length;l++){var s=a.util.formatProductName(n[l].menu_name)+"-l-"+a.util.encodeMenuType(n[l].menu_type)+"-"+a.util.encodeMenuType(a.util.getUvid())+".html"+i;"1"==n[l].supportgp&&(s=a.util.formatProductName(n[l].menu_name)+"-g-"+a.util.encodeMenuType(n[l].menu_type)+"-"+a.util.encodeMenuType(a.util.getUvid())+".html"+i),l==n.length-1?(r=r+"<li class='active'><a href='"+s+"'>"+n[l].menu_name+"</a></li>",e("#product_classify_name").html(n[l].menu_name),document.title=n[l].menu_name):r=r+"<li><a href='"+s+"'>"+n[l].menu_name+"</a></li>"}e(".breadcrumb").html(r),e(".breadcrumb").removeClass("hide")}}function s(){e(".loading-mask").addClass("hide"),e(".main-wrap").removeClass("invisibility"),e("footer").removeClass("invisibility")}function o(){var t=JSON.parse(sessionStorage.menus);if(t=a.util.handleMenu(t)){if(e("#menu_list_wrap").html(e("#menuListTempl").tmpl(t)),e("#menu_list_wrap a").each(function(){e(this).click(function(){event.stopPropagation();var t=a.util.getAdvSource().u;t||(t=a.util.getQueryString("u"));var i="";t&&(i="?u="+t);var n=a.util.encodeMenuType(a.util.getUvid()),r=e(this).attr("href");if(r&&r.indexOf("-l-")>-1){var l=a.util.getListParams(r),s=l[l.length-2];s=a.util.encodeMenuType(s);var o=r.substring(0,r.indexOf("-l-")),u=a.util.formatProductName(o)+"-l-"+s+"-"+n+".html"+i;e(this).attr("href",u)}else if(r&&r.indexOf("-g-")>-1){var l=a.util.getListParams(r),s=l[l.length-2];s=a.util.encodeMenuType(s);var o=r.substring(0,r.indexOf("-g-")),u=a.util.formatProductName(o)+"-g-"+s+"-"+n+".html"+i;e(this).attr("href",u)}})}),sessionStorage.selected_category_id)for(var i=e("#menu_list_wrap span"),n=0;n<i.length;n++)i[n].id==sessionStorage.selected_category_id?(e(i[n]).addClass("sale-selected"),e(i[n]).parent().parent().parent().find("li .classify-title").addClass("red")):e(i[n]).removeClass("sale-selected");for(var r=a.util.menu[a.util.menu.length-1].menu_type,i=e("#menu_list_wrap span"),n=0;n<i.length;n++){i[n].id==r?e(i[n]).addClass("selected"):e(i[n]).removeClass("selected");for(var l=0;l<a.util.menu.length;l++)if(i[n].id==a.util.menu[l].menu_type){"menu_list_wrap"!==e(i[n]).parent().parent().parent()[0].id&&"div"!==e(i[n]).parent().parent().parent()[0].tagName.toLowerCase()&&(e(i[n]).parent().parent().parent().find("ul:first").css("display","block"),e(i[n]).parent().parent().parent().find(".icon-21:first").addClass("icon-jianhao"),e(i[n]).parent().parent().parent().find(".icon-21:first").removeClass("icon-21"),e(i[n]).parent().parent().parent().css("background","#F5F5F5"));break}}e("#menu_list_wrap #arrow_icon").bind("click",function(){event.stopPropagation(),e(this).find("i").hasClass("icon-21")?(e(this).parent().parent().css("background","#F5F5F5"),e(this).parent().find(".left-title-wrap .classify-title").addClass("open"),e(this).parent().parent().find("ul:first").slideDown(500),e(this).find("i").removeClass("icon-21"),e(this).find("i").addClass("icon-jianhao")):(e(this).parent().hasClass("second-menu-item")||e(this).parent().parent().css("background","#fff"),e(this).parent().find(".left-title-wrap .classify-title").removeClass("open"),e(this).parent().parent().find("ul:first").slideUp(500),e(this).find("i").addClass("icon-21"),e(this).find("i").removeClass("icon-jianhao"))})}}console.log("group.js"),a.util.getCookie("isFirst")||(a.util.setCookie("isFirst",0),e(".loading-mask").removeClass("hide")),a.initLoginStatus();var u=window.location.href,d=a.util.getListParams(u),f=a.util.decodeMenuType(d[d.length-2]);a.setLanguageCallback(function(){r(),a.util.menu=[],a.util.getClassifyNames(f,function(){document.title=a.util.menu[0].menu_name,l(),o()})})});