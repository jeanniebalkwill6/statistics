"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(t,e,i,r,s){function a(e){e&&e.usrico?s.util.setUserImage(t("#sex_image"),e.usrico):"0"==e.sex?t("#sex_image").attr("src","resources/img/user/user-female.png"):"1"==e.sex&&t("#sex_image").attr("src","resources/img/user/user-female.png")}function l(e){var i=[],r={};r.label=t.i18n.map.OrderNumber+":",r.value=e.orderId,i.push(r),r={},r.label=t.i18n.map.OrderDate+":",r.value=s.util.formatOrderDateTime(e.crTime),i.push(r),e.shippingAddr&&(r={},r.label=t.i18n.map.ShippedTo+":",r.value=e.shippingAddr.recFirstname+" "+e.shippingAddr.recLastname+"("+e.shippingAddr.streetAddr+" "+e.shippingAddr.extendAddr+" "+e.shippingAddr.city+","+e.shippingAddr.province+" "+e.shippingAddr.postCode+","+e.shippingAddr.fullCountry+")",i.push(r),r={},r.label="",r.value=t.i18n.map.PhoneNumberlabel+": "+e.shippingAddr.telephone,i.push(r)),e.billAddr&&(r={},r.label=t.i18n.map.BilledTo+":",r.value=e.billAddr.recFirstname+" "+e.billAddr.recLastname+"("+e.billAddr.streetAddr+" "+e.billAddr.extendAddr+" "+e.billAddr.city+","+e.billAddr.province+" "+e.billAddr.postCode+","+e.billAddr.fullCountry+")",i.push(r),r={},r.label="",r.value=t.i18n.map.PhoneNumberlabel+": "+e.billAddr.telephone,i.push(r)),r={},r.label=t.i18n.map.OrderStatus+":",0==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusPendding:1==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusSuccess:2==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusFail:3==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusDelay:4==e.paymentStatus&&(e.paymentStatusString=t.i18n.map.OrderStatusDelivered),r.value=e.paymentStatusString,i.push(r),t("#order_info").html(t("#orderInfoTempl").tmpl(i))}s.initLoginStatus(function(e){if(e){if(sessionStorage.userInfo){var i=JSON.parse(sessionStorage.userInfo);i.firstName?t("#name").text(i.firstName+i.lastName):i.email&&t("#name").text(i.email),a(i)}sessionStorage.commentSwitch&&"1"==sessionStorage.commentSwitch?t("#menu_my_comment").removeClass("hide"):t("#menu_my_comment").addClass("hide"),sessionStorage.messageSwitch&&"1"==sessionStorage.messageSwitch?t("#menu_my_message").removeClass("hide"):t("#menu_my_message").addClass("hide")}else window.location.href="../../../login.html"});var d=s.util.getQueryString("id");!function(e){s.dao.getOrderDetail({orderId:e},function(e){var i=s.util.getCurrencySymbol(e.correncyCode);i||(i=s.util.getCurrencySymbol(s.util.getLocalCurrency()));var r=s.util.getAdvSource().u;r||(r=s.util.getQueryString("u"));var a="";r&&(a="?u="+r);for(var d=s.util.encodeMenuType(s.util.getUvid()),o=e.spCart,n=0;n<o.length;n++){var m=o[n];if(m.displayImg=s.util.picUrl+m.displayImg,m.productPrice=s.util.formatProductPrice(m.productPrice,i),"2"==m.attrFlg){var u=s.util.formatProductName(m.productName)+"-d-"+s.util.encodeMenuType(m.productId)+"-"+s.util.encodeMenuType(m.productColorId)+"-"+d+".html"+a;m.href=u}else{var u=s.util.formatProductName(m.productName)+"-d-"+s.util.encodeMenuType(m.productId)+"-"+s.util.encodeMenuType(m.productColorId)+"-"+d+".html"+a;m.href=u}if(m.subCarts&&m.subCarts.length>0)for(var p=0;p<m.subCarts.length;p++){var c=m.subCarts[p];c.attrDes&&c.attrDes.length>0?c.colorImgpath=s.util.picUrl+c.colorImgpath:(m.subCarts.splice(p,1),p-=1)}}t("#cart_list").html(t("#cartTempl").tmpl(o)),t("#cart_list #color_title").html(t.i18n.map.ColorTitle),t("#cart_list #item").html(t.i18n.map.Item),t("#cart_list #qty").html(t.i18n.map.Qty),t("#cart_list #unit").html(t.i18n.map.Unit),l(e);var h=[];1==e.mdis.enabled?(t("#sub_total").html(s.util.formatProductPrice(e.realCost,i)),t("#sub_total_wrap").removeClass("hide"),t("#mdis_title").text(e.mdis.mDisLable),t("#mdis_value").text(e.mdis.mDisVal),t("#m_dis_wrap").removeClass("hide"),t("#grand_total").html(e.mdis.totalAfterMDis),h.push({disCost:e.totalCost,disTitle:t.i18n.map.CartTotal,policyId:-1}),h=h.concat(e.orderDisInfos),h.push({disCost:e.realCost,disTitle:t.i18n.map.SubTotal,policyId:-1}),h.push({disCost:e.mdis.mDisVal,disTitle:e.mdis.mDisLable,policyId:1}),h.push({disCost:e.mdis.totalAfterMDis,disTitle:t.i18n.map.GrandTotal,policyId:-1})):(h.push({disCost:e.totalCost,disTitle:t.i18n.map.SubTotal,policyId:-1}),h=h.concat(e.orderDisInfos),h.push({disCost:e.realCost,disTitle:t.i18n.map.GrandTotal,policyId:-1}));for(var n=0;n<h.length;n++){var g=h[n];g.disCost<0&&1!==g.policyId?g.disCost="-"+s.util.formatProductPrice(-g.disCost,i):1!==g.policyId&&(g.disCost="+"+s.util.formatProductPrice(g.disCost,i))}t("#dis_info_list").html(t("#disInfoTempl").tmpl(h))})}(d),function(){t(".menu-item-parent .menu-item-wrap").bind("click",function(){t(this).hasClass("selected")||(t(".menu-item-parent .menu-item-wrap").removeClass("selected"),t(this).addClass("selected"),t(".menu-content-wrap .title").text(t(this).text()))})}()});